[mysqld]
# Basic settings
#bind-address = 127.0.0.1  # Listen only on localhost for security
datadir = /var/lib/mysql
socket = /var/run/mysqld/mysqld.sock

# Memory optimizations for 1GB RAM
innodb_buffer_pool_size = 256M  # ~25% of RAM, critical for InnoDB
key_buffer_size = 16M  # Small buffer for MyISAM (if used)
max_connections = 15  # Low to save memory
table_open_cache = 400  # Reasonable for small DBs
thread_cache_size = 4  # Small for low concurrency

# InnoDB tuning
innodb_log_file_size = 10M  # Small logs to save space
innodb_log_buffer_size = 8M
innodb_flush_log_at_trx_commit = 1  # Durability over speed
innodb_thread_concurrency = 1  # Limit to 1 CPU core
innodb_read_io_threads = 1
innodb_write_io_threads = 1

# General tuning
#query_cache_type = 0  # Disable query cache to save memory
#query_cache_size = 0
tmp_table_size = 16M  # Small temp tables
max_heap_table_size = 16M
slow_query_log = 1  # Enable logging for troubleshooting
slow_query_log_file = /var/log/mysql/slow.log

# Security and misc
skip-host-cache
skip-name-resolve
secure-file-priv=/var/lib/mysql-files
user=mysql

pid-file=/var/run/mysqld/mysqld.pid
[client]
socket = /var/run/mysqld/mysqld.sock
